---
import BaseLayout from '@layouts/BaseLayout.astro';
import Button from '@components/ui/Button.astro';
import BlogCard from '@components/blog/BlogCard.astro';
import EventCard from '@components/events/EventCard.astro';
import { getCollection } from 'astro:content';
import { sortByDate } from '@lib/utils';

// Get featured blog posts (latest 3)
const allBlogPosts = await getCollection('blog', ({ data }) => !data.draft);
const featuredPosts = sortByDate(allBlogPosts).slice(0, 3);

// Get upcoming events
const allEvents = await getCollection('events', ({ data }) => data.status === 'upcoming');
const upcomingEvents = sortByDate(allEvents).slice(0, 3);
---

<BaseLayout>
  <!-- Hero Section with Unlock Animation Placeholder -->
  <section class="relative bg-gradient-to-br from-primary-indigo via-primary-indigo to-accent-magenta text-white overflow-hidden">
    <div class="absolute inset-0 opacity-10">
      <div class="absolute inset-0 bg-[radial-gradient(circle_at_50%_50%,_rgba(0,217,255,0.3),transparent_50%)]"></div>
    </div>

    <div class="container mx-auto px-4 py-32 md:py-40 relative z-10">
      <div class="max-w-4xl mx-auto text-center">
        <h1 class="text-5xl md:text-6xl lg:text-7xl font-bold mb-6 tracking-tight whitespace-nowrap">
          Coming Soon
        </h1>
        <div class="flex flex-col sm:flex-row gap-4 justify-center mb-12">
          <Button href="/events" variant="primary" size="lg">
            Attend an Experience
          </Button>
        </div>
      </div>
    </div>
  </section>

  <!-- Mission Statement - Hidden for Coming Soon -->
  <!-- <section class="py-16 md:py-24 bg-primary-cream">
    <div class="container mx-auto px-4">
      <div class="max-w-3xl mx-auto text-center">
        <h2 class="text-3xl md:text-4xl font-bold text-primary-indigo mb-6">
          Why Intelligent Freedom Matters
        </h2>
        <p class="text-lg text-primary-indigo/80 mb-6 leading-relaxed">
          AI creates amazing opportunities, vulnerabilities, and potential power imbalances.
        </p>
        <p class="text-lg text-primary-indigo/80 leading-relaxed">
          We're building a future where individuals can think for themselves.
        </p>
      </div>
    </div>
  </section> -->

  <!-- Upcoming Events -->
  {upcomingEvents.length > 0 && (
    <section class="py-16 md:py-24">
      <div class="container mx-auto px-4">
        <div class="flex items-center justify-between mb-12">
          <h2 class="text-3xl md:text-4xl font-bold text-primary-indigo">
            Upcoming Experiences
          </h2>
          <Button href="/events" variant="outline" size="sm">
            View All
          </Button>
        </div>
        <div class="grid gap-8 md:grid-cols-2 lg:grid-cols-3">
          {upcomingEvents.map((event) => (
            <EventCard
              title={event.data.title}
              eventDate={event.data.eventDate}
              eventEndDate={event.data.eventEndDate}
              location={event.data.location}
              status={event.data.status}
              tags={event.data.tags}
              slug={event.slug}
              featuredImage={event.data.featuredImage}
            />
          ))}
        </div>
      </div>
    </section>
  )}

  <!-- Latest Blog Posts -->
  {featuredPosts.length > 0 && (
    <section class="py-16 md:py-24 bg-primary-cream">
      <div class="container mx-auto px-4">
        <div class="flex items-center justify-between mb-12">
          <h2 class="text-3xl md:text-4xl font-bold text-primary-indigo">
            Latest from the Blog
          </h2>
          <Button href="/blog" variant="outline" size="sm">
            View All
          </Button>
        </div>
        <div class="grid gap-8 md:grid-cols-2 lg:grid-cols-3">
          {featuredPosts.map((post) => (
            <BlogCard
              title={post.data.title}
              description={post.data.description}
              pubDate={post.data.pubDate}
              author={post.data.author}
              tags={post.data.tags}
              slug={post.slug}
              featuredImage={post.data.featuredImage}
            />
          ))}
        </div>
      </div>
    </section>
  )}

  <!-- Divider -->
  <div class="bg-primary-cream py-8">
    <div class="container mx-auto px-4">
      <hr class="border-t-2 border-primary-cyan/30 max-w-xs mx-auto" />
    </div>
  </div>

  <!-- Community CTA -->
  <section class="py-16 md:py-24 bg-gradient-to-br from-primary-indigo to-accent-magenta text-white">
    <div class="container mx-auto px-4 text-center">
      <h2 class="text-3xl md:text-4xl font-bold mb-6">
        Join the Movement
      </h2>
      <p class="text-xl mb-8 text-white/90 max-w-2xl mx-auto">
        Curious about AI? There's a place for you in the AI Freedom Lab community.
      </p>
      <div class="flex justify-center">
        <Button href="/events" variant="primary" size="lg">
          Attend an Experience
        </Button>
      </div>
    </div>
  </section>
</BaseLayout>
